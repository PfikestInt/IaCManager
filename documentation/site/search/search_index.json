{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Signature IaC","text":""},{"location":"index.html#repository-layout","title":"Repository Layout","text":"<p>There will be two prebuilt repositories:</p> <ul> <li>TerraformHub: A set of prebuilt Terraform modules for creating commonly used resources.</li> <li>WorkloadTemplate: A standardized repository structure from which workload IaC repositories will be derived.</li> </ul> <pre><code>stateDiagram-v2\n    state Prebuilt {\n        WorkloadTemplate --&gt; Code\n        TerraformHub --&gt; Pipeline\n    }\n\n    state WorkloadRepository {\n        Code --&gt; Pipeline\n        Pipeline --&gt; ResourceGroup\n    }\n\n    state Azure {\n        ResourceGroup\n    }</code></pre>"},{"location":"index.html#environment-branches","title":"Environment Branches","text":"<p>The environments within a workload IaC repository are managed using a branching scheme where definitions common to all environments are stored in Main and inherited by the individual environment branches where environment specific definitions can be implemented.</p> <pre><code>stateDiagram-v2\n    Main --&gt; Develop\n    Main --&gt; Test\n    Main --&gt; Stage\n    Main --&gt; Prod\n    Main --&gt; Feature/Main\n    Develop --&gt; Feature/Develop\n    Test --&gt; Feature/Test\n    Stage --&gt; Feature/Stage\n    Prod --&gt; Feature/Prod\n\n    Feature/Main --&gt; Main\n    Feature/Develop --&gt; Develop\n    Feature/Test --&gt; Test\n    Feature/Stage --&gt; Stage\n    Feature/Prod --&gt; Prod</code></pre>"},{"location":"index.html#pipelines","title":"Pipelines","text":""},{"location":"index.html#create-workload-pipeline","title":"Create Workload Pipeline","text":"<p>The Create Workload pipeline is used to create a standardized repository in which an IaC implementation can be defined and managed. This pipeline is also responsible for populating the environmental secrets that provide the credentials for each of the environment branches.</p>"},{"location":"index.html#deployment-pipeline","title":"Deployment Pipeline","text":"<p>The Deployment pipeline is triggered upon approval of a pull request merging changes into a branch.  It creates a deployment plan and places the plan in the pull request as a comment for review. Following the review, the deployment stage of the pipeline can either be executed of canceled.</p>"},{"location":"design/key_vault.html","title":"Key Vault","text":"<p>Key Vault: kv-d-terraform-001</p> <p>Storage Account: sadterraformstate</p> Secret Description arm-client-id Service principal used by Terraform arm-client-secret Service principal used by Terraform arm-tenant-id Service principal used by Terraform sadterraformstate-key Storage account for state"},{"location":"design/naming_convention.html","title":"Naming Convention","text":"<p>The naming convention follows the following pattern:</p> <p>[ Resource Type ]-[ Environment ]-[ Role ]-[ Region ]-[ Unique Identifier ]</p> <ul> <li>Resource Type: a standard Microsoft abbreviation for the resource</li> <li>Environment: d for dev, t for test, s for stage, p for prod</li> <li>Role: a descriptive purpose identifier</li> <li>Region: the Azure region</li> <li>Unique Identifier: a three digit integer</li> </ul> <p>The names will be built dynamically using Terraform variables.</p> <ul> <li>Resource Type: will be hard coded into the module definition</li> <li>Environment: will be provided per environment branch</li> <li>Role: will be provided per resource definition</li> <li>Region: will be provided per resource definition</li> <li>Unique Identifier: will be provided per resource definition</li> </ul>"},{"location":"design/sequence_diagrams/backup.html","title":"Create Repository","text":"<p>The prerequisites are:</p> <ol> <li>IaC repository template exists.</li> <li>Key Vault with Service Principal credentials has been populated.</li> </ol> <p>The sequence diagram for the happy-path life cycle of a create repository job is presented below:</p> <pre><code>sequenceDiagram\n  autonumber\n  Person-&gt;&gt;Variable: set repo name\n  Variable-&gt;&gt;Person: repo name\n  Person-&gt;&gt;Pipeline: execute\n  Pipeline-&gt;&gt;GitHub: create repo from template\n  GitHub-&gt;&gt;Pipeline: repo created\n  Pipeline-&gt;&gt;Key Vault: fetch develop credentials\n  Key Vault-&gt;&gt;Pipeline: develop credentials\n  Pipeline-&gt;&gt;GitHub: setup develop environment secrets\n  GitHub-&gt;&gt;Pipeline: secrets populated\n  Pipeline-&gt;&gt;Key Vault: fetch test credentials\n  Key Vault-&gt;&gt;Pipeline: test credentials\n  Pipeline-&gt;&gt;GitHub: setup test environment secrets\n  GitHub-&gt;&gt;Pipeline: secrets populated\n  Pipeline-&gt;&gt;Key Vault: fetch stage credentials\n  Key Vault-&gt;&gt;Pipeline: stage credentials\n  Pipeline-&gt;&gt;GitHub: setup stage environment secrets\n  GitHub-&gt;&gt;Pipeline: secrets populated\n  Pipeline-&gt;&gt;Key Vault: fetch prod credentials\n  Key Vault-&gt;&gt;Pipeline: prod credentials\n  Pipeline-&gt;&gt;GitHub: setup prod environment secrets\n  GitHub-&gt;&gt;Pipeline: secrets populated</code></pre>"},{"location":"design/sequence_diagrams/restore.html","title":"Environment Management","text":"<p>The sequence diagram for the happy-path life cycle of a deployment is presented below:</p> <pre><code>sequenceDiagram\n  autonumber\n  Person-&gt;&gt;GitHub: feature branch from environment branch\n  GitHub-&gt;&gt;Person: feature branch created\n  Person-&gt;&gt;IDE: implement IaC\n  IDE-&gt;&gt;Person: commit features\n  Person-&gt;&gt;GitHub: pull request to merge to environment branch\n  GitHub-&gt;&gt;Pipeline: pull TerraformHub modules\n  Pipeline-&gt;&gt;Terraform: build plan\n  Terraform-&gt;&gt;Pipeline: plan built\n  Pipeline-&gt;&gt;Pull Request: append plan as comment\n  Pull Request-&gt;&gt;Person: review plan\n  Person-&gt;&gt;Pipeline: approve deployment\n  Pipeline-&gt;&gt;Terraform: deploy\n  Terraform-&gt;&gt;Azure: deploy</code></pre>"},{"location":"repositories_created/workloads_created.html","title":"Workloads Created","text":"Repository Description Created By Date test A test Danny 2025-02-13"}]}